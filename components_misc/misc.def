# Generated by Neurodocker and Reproenv.

Bootstrap: docker
From: centos:7

%environment
export PATH="/opt/dcm2niix-latest:$PATH"
export C3DPATH="/opt/convert3d-1.0.0"
export PATH="/opt/convert3d-1.0.0/bin:$PATH"

%post
yum install -y -q \
    curl \
    unzip
yum clean all
rm -rf /var/cache/yum/*
mkdir -p /opt/dcm2niix-latest
cd /opt/dcm2niix-latest
curl -fsSL -o dcm2niix.zip https://github.com/rordenlab/dcm2niix/releases/latest/download/dcm2niix_lnx.zip
unzip dcm2niix.zip
rm dcm2niix.zip
chmod +x dcm2niix

yum install -y -q \
    curl
yum clean all
rm -rf /var/cache/yum/*
curl -fsSL --output /usr/local/bin/jq https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64
chmod +x /usr/local/bin/jq

yum install -y -q \
    curl
yum clean all
rm -rf /var/cache/yum/*
echo "Downloading Convert3D ..."
mkdir -p /opt/convert3d-1.0.0
curl -fsSL https://sourceforge.net/projects/c3d/files/c3d/1.0.0/c3d-1.0.0-Linux-x86_64.tar.gz/download \
| tar -xz -C /opt/convert3d-1.0.0 --strip-components 1

# Save specification to JSON.
printf '{ \
  "pkg_manager": "yum", \
  "existing_users": [ \
    "root" \
  ], \
  "instructions": [ \
    { \
      "name": "from_", \
      "kwds": { \
        "base_image": "centos:7" \
      } \
    }, \
    { \
      "name": "env", \
      "kwds": { \
        "PATH": "/opt/dcm2niix-latest:$PATH" \
      } \
    }, \
    { \
      "name": "run", \
      "kwds": { \
        "command": "yum install -y -q \\\\\\n    curl \\\\\\n    unzip\\nyum clean all\\nrm -rf /var/cache/yum/*\\nmkdir -p /opt/dcm2niix-latest\\ncd /opt/dcm2niix-latest\\ncurl -fsSL -o dcm2niix.zip https://github.com/rordenlab/dcm2niix/releases/latest/download/dcm2niix_lnx.zip\\nunzip dcm2niix.zip\\nrm dcm2niix.zip\\nchmod +x dcm2niix" \
      } \
    }, \
    { \
      "name": "run", \
      "kwds": { \
        "command": "yum install -y -q \\\\\\n    curl\\nyum clean all\\nrm -rf /var/cache/yum/*\\ncurl -fsSL --output /usr/local/bin/jq https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64\\nchmod +x /usr/local/bin/jq" \
      } \
    }, \
    { \
      "name": "env", \
      "kwds": { \
        "C3DPATH": "/opt/convert3d-1.0.0", \
        "PATH": "/opt/convert3d-1.0.0/bin:$PATH" \
      } \
    }, \
    { \
      "name": "run", \
      "kwds": { \
        "command": "yum install -y -q \\\\\\n    curl\\nyum clean all\\nrm -rf /var/cache/yum/*\\necho \\"Downloading Convert3D ...\\"\\nmkdir -p /opt/convert3d-1.0.0\\ncurl -fsSL https://sourceforge.net/projects/c3d/files/c3d/1.0.0/c3d-1.0.0-Linux-x86_64.tar.gz/download \\\\\\n| tar -xz -C /opt/convert3d-1.0.0 --strip-components 1" \
      } \
    } \
  ] \
}' > /.reproenv.json
# End saving to specification to JSON.
